{"version":3,"sources":["assets/js/tabs.ts","assets/js/index.ts"],"names":[],"mappings":"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","file":"js.df570949.js","sourceRoot":"..","sourcesContent":["/*\n *  This is a simplified variant of the w3 accessible tabs:\n *  https://www.w3.org/TR/wai-aria-practices/examples/tabs/tabs-1/tabs.html\n *\n */\n\nclass Tabs {\n  domNode: HTMLElement;\n  tablist: Element;\n  tabs: NodeListOf<HTMLElement & { index: number }>;\n  panels: NodeListOf<HTMLElement>;\n  keys: {\n    end: number;\n    home: number;\n    left: number;\n    right: number;\n    enter: number;\n    space: number;\n  };\n  direction: {\n    37: number;\n    38: number;\n    39: number;\n    40: number;\n  };\n\n  constructor(domNode: HTMLElement) {\n    this.tablist = domNode.querySelectorAll('[role=\"tablist\"]')[0];\n    this.domNode = domNode;\n\n    this.keys = {\n      end: 35,\n      home: 36,\n      left: 37,\n      right: 39,\n      enter: 13,\n      space: 32\n    };\n\n    this.direction = {\n      37: -1,\n      38: -1,\n      39: 1,\n      40: 1\n    };\n    this.generateArrays();\n  }\n\n  init(activated?: number) {\n    for (let i = 0; i < this.tabs.length; i += 1) {\n      this.addListeners(i);\n      if (activated !== undefined && activated < this.tabs.length) {\n        this.activateTab(this.tabs[activated], false);\n      }\n    }\n  }\n\n  generateArrays() {\n    this.tabs = this.domNode.querySelectorAll('[role=\"tab\"]');\n    this.panels = this.domNode.querySelectorAll('[role=\"tabpanel\"]');\n  }\n\n  addListeners(index: number) {\n    this.tabs[index].addEventListener(\n      \"click\",\n      this.clickEventListener.bind(this)\n    );\n    this.tabs[index].addEventListener(\n      \"keydown\",\n      this.keydownEventListener.bind(this)\n    );\n    this.tabs[index].addEventListener(\n      \"keyup\",\n      this.keyupEventListener.bind(this)\n    );\n\n    // Build an array with all this.tabs (<button>s) in it\n    this.tabs[index].index = index;\n  }\n\n  clickEventListener(event) {\n    const tab = event.target;\n    this.activateTab(tab, false);\n  }\n\n  keydownEventListener(event: KeyboardEvent) {\n    const key = event.keyCode;\n\n    switch (key) {\n      case this.keys.end:\n        event.preventDefault();\n        // Activate last tab\n        this.focusLastTab();\n        break;\n      case this.keys.home:\n        event.preventDefault();\n        // Activate first tab\n        this.focusFirstTab();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  keyupEventListener(event) {\n    const key = event.keyCode;\n\n    switch (key) {\n      case this.keys.left:\n      case this.keys.right:\n        this.switchTabOnArrowPress(event);\n        break;\n      case this.keys.enter:\n      case this.keys.space:\n        this.activateTab(event.target, true);\n        break;\n      default:\n        break;\n    }\n  }\n\n  switchTabOnArrowPress(event: KeyboardEvent) {\n    const pressed = event.keyCode;\n\n    if (this.direction[pressed]) {\n      const target = event.target;\n      if (target.index !== undefined) {\n        if (this.tabs[target.index + this.direction[pressed]]) {\n          this.tabs[target.index + this.direction[pressed]].focus();\n        } else if (pressed === this.keys.left) {\n          this.focusLastTab();\n        } else if (pressed === this.keys.right) {\n          this.focusFirstTab();\n        }\n      }\n    }\n  }\n\n  activateTab(tab: HTMLElement, setFocus: boolean) {\n    // Deactivate all other tabs\n    this.deactivateTabs();\n\n    // Remove tabindex attribute\n    tab.removeAttribute(\"tabindex\");\n\n    // Set the tab as selected\n    tab.setAttribute(\"aria-selected\", \"true\");\n\n    // Get the value of aria-controls (which is an ID)\n    const controls = tab.getAttribute(\"aria-controls\");\n\n    // Remove hidden attribute from tab panel to make it visible\n    document.getElementById(controls).removeAttribute(\"hidden\");\n\n    // Set focus when required\n    if (setFocus) {\n      tab.focus();\n    }\n  }\n\n  deactivateTabs() {\n    for (let t = 0; t < this.tabs.length; t += 1) {\n      this.tabs[t].setAttribute(\"tabindex\", \"-1\");\n      this.tabs[t].setAttribute(\"aria-selected\", \"false\");\n    }\n\n    for (let p = 0; p < this.panels.length; p += 1) {\n      this.panels[p].setAttribute(\"hidden\", \"hidden\");\n    }\n  }\n\n  focusFirstTab() {\n    this.tabs[0].focus();\n  }\n\n  // Make a guess\n  focusLastTab() {\n    this.tabs[this.tabs.length - 1].focus();\n  }\n}\n\nexport default Tabs;\n","import Tabs from \"./tabs\";\n\nconst getRandomInt = (max: number) => {\n  return Math.floor(Math.random() * Math.floor(max));\n};\n\n[].forEach.call(document.getElementsByClassName(\"tabs\"), (el: HTMLElement) => {\n  const tabs = new Tabs(el);\n  const max = el.querySelectorAll('[role=\"tab\"]').length;\n  const randomInt = getRandomInt(max);\n  tabs.init(randomInt);\n});\n"]}